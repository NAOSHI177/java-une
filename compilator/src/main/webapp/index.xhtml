<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:p="primefaces">
<h:head>
    <title>Compilador Modular</title>
    <style>
        :root {
            color-scheme: dark;
            --ios-bg: #000000;
            --ios-surface: #1c1c1e;
            --ios-surface-elevated: #2c2c2e;
            --ios-surface-deep: #131315;
            --ios-separator: #3a3a3c;
            --ios-text: #f2f2f7;
            --ios-text-muted: #8e8e93;
            --ios-blue: #0a84ff;
            --ios-blue-pressed: #3c9dff;
            --ios-green: #30d158;
            --ios-red: #ff453a;
            --ios-orange: #ff9f0a;
        }

        html,
        body {
            margin: 0;
            min-height: 100%;
        }

        body.dark-body {
            background:
                radial-gradient(circle at 80% -10%, rgba(10, 132, 255, 0.13), transparent 42%),
                radial-gradient(circle at 10% 100%, rgba(10, 132, 255, 0.08), transparent 40%),
                var(--ios-bg);
            color: var(--ios-text);
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", "Segoe UI", sans-serif;
        }

        .dark-layout {
            max-width: 980px;
            margin: 28px auto;
            padding: 0 14px 30px;
        }

        .dark-layout .ui-widget,
        .dark-layout .ui-widget .ui-widget {
            color: var(--ios-text);
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", "Segoe UI", sans-serif;
        }

        .dark-panel.ui-panel {
            background: linear-gradient(180deg, rgba(35, 35, 37, 0.9), rgba(19, 19, 21, 0.95));
            border: 1px solid var(--ios-separator);
            border-radius: 24px;
            box-shadow: 0 26px 40px rgba(0, 0, 0, 0.55), inset 0 1px 0 rgba(255, 255, 255, 0.03);
            overflow: hidden;
            backdrop-filter: blur(12px);
        }

        .dark-panel .ui-panel-titlebar {
            background: rgba(28, 28, 30, 0.82);
            border: 0;
            border-bottom: 1px solid var(--ios-separator);
            color: var(--ios-text);
            font-size: 1.04rem;
            font-weight: 600;
            letter-spacing: -0.01em;
            padding: 1rem 1.2rem;
            border-radius: 24px 24px 0 0;
        }

        .dark-panel .ui-panel-content {
            border: 0;
            background: transparent;
            padding: 1.2rem;
        }

        .dark-label.ui-outputlabel {
            display: inline-block;
            margin-bottom: 10px;
            color: var(--ios-text-muted);
            font-size: 0.9rem;
            font-weight: 600;
            letter-spacing: 0.01em;
        }

        .dark-textarea.ui-inputfield,
        .dark-textarea.ui-inputfield.ui-state-focus {
            width: 100%;
            resize: vertical;
            background: rgba(44, 44, 46, 0.72);
            color: var(--ios-text);
            border: 1px solid #4a4a4d;
            border-radius: 16px;
            padding: 14px 15px;
            line-height: 1.5;
            box-sizing: border-box;
            transition: border-color 0.18s ease, box-shadow 0.18s ease, background-color 0.18s ease;
        }

        .dark-textarea.ui-inputfield:focus {
            border-color: var(--ios-blue);
            background: rgba(50, 50, 53, 0.86);
            box-shadow: 0 0 0 3px rgba(10, 132, 255, 0.28);
            outline: none;
        }

        .dark-button.ui-button {
            margin-top: 12px;
            background: var(--ios-blue);
            border: 1px solid #0077ee;
            color: #ffffff;
            font-weight: 600;
            border-radius: 999px;
            padding: 0.62rem 1.2rem;
            text-shadow: none;
            box-shadow: 0 8px 20px rgba(10, 132, 255, 0.35);
            transition: transform 0.14s ease, background-color 0.14s ease, box-shadow 0.14s ease;
        }

        .dark-button.ui-button:hover,
        .dark-button.ui-button:focus {
            background: var(--ios-blue-pressed);
            border-color: var(--ios-blue-pressed);
            color: #ffffff;
            box-shadow: 0 10px 22px rgba(10, 132, 255, 0.4);
            transform: translateY(-1px);
        }

        .dark-button.ui-button:active {
            transform: translateY(0);
            box-shadow: 0 6px 14px rgba(10, 132, 255, 0.3);
        }

        .dark-results {
            margin-top: 20px;
        }

        .result-message {
            display: block;
            margin-top: 6px;
            color: var(--ios-text);
            font-size: 0.97rem;
            font-weight: 600;
        }

        .dark-fieldset.ui-fieldset {
            margin-top: 14px;
            background: linear-gradient(180deg, rgba(31, 31, 34, 0.93), rgba(20, 20, 22, 0.97));
            border: 1px solid var(--ios-separator);
            border-radius: 16px;
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.02);
        }

        .dark-fieldset .ui-fieldset-legend {
            background: transparent;
            border: 0;
            border-bottom: 1px solid rgba(58, 58, 60, 0.8);
            border-radius: 0;
            color: var(--ios-blue);
            font-size: 0.95rem;
            font-weight: 600;
            padding: 0.55rem 0.8rem 0.52rem;
            margin: 0;
        }

        .dark-fieldset .ui-fieldset-content {
            border: 0;
            background: transparent;
            color: var(--ios-text);
            padding: 0.75rem 0.85rem 0.88rem;
        }

        .code-output {
            display: block;
            white-space: pre-wrap;
            color: #e3e3e9;
            font-family: "SF Mono", "Menlo", "Consolas", monospace;
            line-height: 1.48;
            font-size: 0.9rem;
        }

        .dark-messages .ui-messages-info,
        .dark-messages .ui-messages-warn,
        .dark-messages .ui-messages-error,
        .dark-messages .ui-messages-fatal {
            border-radius: 14px;
            box-shadow: none;
            margin-top: 8px;
            margin-bottom: 8px;
        }

        .dark-messages .ui-messages-info {
            background: rgba(10, 132, 255, 0.16);
            border: 1px solid rgba(10, 132, 255, 0.55);
            color: #d9e9ff;
        }

        .dark-messages .ui-messages-warn {
            background: rgba(255, 159, 10, 0.18);
            border: 1px solid rgba(255, 159, 10, 0.58);
            color: #ffe6b8;
        }

        .dark-messages .ui-messages-error,
        .dark-messages .ui-messages-fatal {
            background: rgba(255, 69, 58, 0.18);
            border: 1px solid rgba(255, 69, 58, 0.58);
            color: #ffd9d6;
        }

        .ui-growl-item-container {
            border-radius: 14px;
            border: 1px solid var(--ios-separator);
            background: rgba(28, 28, 30, 0.96);
            box-shadow: 0 16px 30px rgba(0, 0, 0, 0.45);
        }

        .ui-growl-item-container .ui-growl-item {
            color: var(--ios-text);
        }

        .ui-growl-message p {
            color: var(--ios-text);
        }

        .ui-fieldset-toggler,
        .ui-fieldset-toggler:hover {
            color: var(--ios-blue);
        }

        .dark-layout a {
            color: var(--ios-blue);
        }

        .dark-layout ::placeholder {
            color: #7f7f85;
            opacity: 1;
        }

        /* Twitter "Noche Oscura" hard override: no white backgrounds */
        body.dark-body,
        .dark-layout,
        .dark-layout .ui-widget,
        .dark-layout .ui-widget-content,
        .dark-layout .ui-panel,
        .dark-layout .ui-panel-content,
        .dark-layout .ui-fieldset,
        .dark-layout .ui-fieldset-content,
        .dark-layout .ui-inputfield,
        .dark-layout .ui-inputtextarea,
        .dark-layout .ui-messages,
        .dark-layout .ui-message,
        .dark-layout .ui-growl-item-container {
            color: #ffffff !important;
        }

        body.dark-body {
            background: #000000 !important;
        }

        .dark-panel.ui-panel,
        .dark-panel .ui-panel-content,
        .dark-results,
        .dark-fieldset.ui-fieldset,
        .dark-fieldset .ui-fieldset-content {
            background: #000000 !important;
        }

        .dark-panel .ui-panel-titlebar {
            background: #16181c !important;
            color: #ffffff !important;
            border-bottom: 1px solid #2f3336 !important;
        }

        .dark-fieldset.ui-fieldset {
            border: 1px solid #2f3336 !important;
            box-shadow: none !important;
        }

        .dark-fieldset .ui-fieldset-legend,
        .dark-fieldset .ui-fieldset-legend a {
            background: #000000 !important;
            color: #ffffff !important;
            border: 0 !important;
        }

        .dark-textarea.ui-inputfield,
        .dark-textarea.ui-inputfield.ui-state-focus,
        .dark-layout .ui-inputfield,
        .dark-layout textarea {
            background: #16181c !important;
            color: #ffffff !important;
            border: 1px solid #2f3336 !important;
            box-shadow: none !important;
        }

        .dark-button.ui-button {
            background: #1d9bf0 !important;
            border: 1px solid #1d9bf0 !important;
            color: #ffffff !important;
            box-shadow: none !important;
        }

        .dark-button.ui-button:hover,
        .dark-button.ui-button:focus {
            background: #1a8cd8 !important;
            border-color: #1a8cd8 !important;
            color: #ffffff !important;
            transform: none !important;
        }

        .dark-messages .ui-messages-info,
        .dark-messages .ui-messages-warn,
        .dark-messages .ui-messages-error,
        .dark-messages .ui-messages-fatal,
        .ui-growl-item-container {
            background: #16181c !important;
            color: #ffffff !important;
            border: 1px solid #2f3336 !important;
        }

        .result-message,
        .code-output,
        .dark-label.ui-outputlabel,
        .dark-layout .ui-outputlabel,
        .dark-layout .ui-outputtext {
            color: #ffffff !important;
        }

        @media (max-width: 768px) {
            .dark-layout {
                margin: 12px auto;
                padding: 0 10px 24px;
            }

            .dark-panel.ui-panel {
                border-radius: 16px;
            }

            .dark-panel .ui-panel-titlebar {
                border-radius: 16px 16px 0 0;
                padding: 0.85rem 1rem;
            }

            .dark-button.ui-button {
                width: 100%;
            }
        }
    </style>
</h:head>
<h:body styleClass="dark-body">
<h:form styleClass="dark-layout">
    <p:growl id="msgs" showDetail="true"/>

    <p:panel header="Compilador Modular (Lexico, Sintactico, Semantico, Intermedio)" styleClass="dark-panel">
        <p:outputLabel for="source" value="Codigo fuente" styleClass="dark-label"/>
        <p:inputTextarea id="source" value="#{compilerBean.sourceCode}" rows="12" cols="100" autoResize="false" styleClass="dark-textarea"/>

        <p:commandButton value="Compilar"
                         actionListener="#{compilerBean.compile}"
                         update="resultPanel msgs"
                         styleClass="dark-button"/>

        <h:panelGroup id="resultPanel" layout="block" styleClass="dark-results">
            <p:messages styleClass="dark-messages"/>
            <h:outputText value="#{compilerBean.message}" styleClass="result-message"/>

            <p:fieldset legend="Analisis Lexico (Tokens)" toggleable="true" collapsed="false" styleClass="dark-fieldset">
                <h:outputText value="#{compilerBean.tokens}" escape="false"
                              styleClass="code-output"/>
            </p:fieldset>

            <p:fieldset legend="Analisis Sintactico (AST)" toggleable="true" collapsed="false" styleClass="dark-fieldset">
                <h:outputText value="#{compilerBean.ast}" escape="false"
                              styleClass="code-output"/>
            </p:fieldset>

            <p:fieldset legend="Codigo Intermedio" toggleable="true" collapsed="false" styleClass="dark-fieldset">
                <h:outputText value="#{compilerBean.intermediateCode}" escape="false"
                              styleClass="code-output"/>
            </p:fieldset>
        </h:panelGroup>
    </p:panel>
</h:form>
</h:body>
</html>
